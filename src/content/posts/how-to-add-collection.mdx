---
title: 'How to Add a New Collection'
pubDate: 2025-10-30
tags: ['guide', 'tutorial', 'collections', 'setup']
---

import FlowDiagram from '@/components/examples/FlowDiagram.astro'

export const collectionSteps = [
    {
        number: 1,
        title: 'Run CLI',
        description: 'pnpm new:collection <name>'
    },
    {
        number: 2,
        title: 'Done!',
        description: 'Everything created automatically'
    },
    {
        number: 3,
        title: 'Customize',
        description: 'Edit description in collections.config.ts (optional)'
    },
    {
        number: 4,
        title: 'Add Post',
        description: 'pnpm new:post <collection> "Title"'
    },
    {
        number: 5,
        title: 'Preview',
        description: 'npm run dev and visit /collections/'
    }
]

So you want to add a new collection? Good news‚Äîit's really easy now.

## What's a collection anyway?

Think of collections as folders for different types of content. You might have:
- **Thoughts** for your reflections and ideas
- **Media** for book/movie reviews
- **Gallery** for photos
- **Projects** for work stuff

Each collection gets its own page and URL structure. Pretty straightforward.

## Two ways to do this

**The fast way:** One CLI command, everything's done.  
**The manual way:** If you like doing things yourself.

Pick whichever feels right.

## Collection Creation Flow

<FlowDiagram steps={collectionSteps} title="Collection Setup Workflow" />

---

## The fast way (CLI)

Seriously, it's one command:

```bash
pnpm new:collection recipes
```

That's it. The CLI handles everything:
- Creates the folder structure
- Sets up the `_assets` folder for images
- Adds an example file with instructions
- Updates your config file
- Generates TypeScript types
- Tells you what to do next

You'll see something like this:

```
üöÄ Creating new collection: recipes

‚úÖ Created folder: src/content/recipes/
‚úÖ Created folder: src/content/recipes/_assets/
‚úÖ Created file: src/content/recipes/_example.md
‚úÖ Updated: src/collections.config.ts
‚úÖ Types generated successfully

‚ú® Collection "recipes" created successfully!
```

### What's next?

You can customize the description in `src/collections.config.ts` if you want. Or just start adding posts:

```bash
pnpm new:post recipes "Chocolate Cake Recipe"
npm run dev
```

Visit `http://localhost:4321/collections/recipes/` and you're done.

---

## The manual way

Prefer doing things yourself? No problem. Here's the step-by-step.

### 1. Edit the config

Open `src/collections.config.ts` and add your collection:

```typescript
export const CONTENT_STRUCTURE = {
  posts: { /* ... */ },
  thoughts: { /* ... */ },
  media: { /* ... */ },
  gallery: { /* ... */ },
  projects: { /* ... */ },
  
  // Add your new collection here
  recipes: {
    type: 'collection' as const,
    title: 'Recipes',
    description: 'Cooking recipes & food',
    urlPattern: '/collections/recipes/{slug}',
    listPage: '/collections/recipes/',
    backLabel: 'recipes',
    showInCollectionsList: true
  },
  
  about: { /* ... */ }
}
```

Once you save this, the system will automatically handle routing, navigation, and TypeScript types (after you sync).

### 2. Create the folders

Make a folder for your collection and one for images:

```bash
mkdir src/content/recipes
mkdir src/content/recipes/_assets
```

Windows users:
```bash
md src\content\recipes
md src\content\recipes\_assets
```

You'll end up with:
```
src/content/recipes/
‚îú‚îÄ‚îÄ _assets/          # images go here
‚îî‚îÄ‚îÄ (your posts here)
```

### 3. Sync the types

Run this to generate TypeScript types:

```bash
pnpm astro sync
```

You'll see:
```
[content] Syncing content
[content] Synced content
[types] Generated 500ms
```

This updates the `.astro/` folder so TypeScript knows about your new collection.

### 4. Add your first post

Create a markdown file:

**`src/content/recipes/chocolate-cake.md`**

```markdown
---
title: 'Best Chocolate Cake Recipe'
pubDate: 2024-11-01
---

![Chocolate Cake](./\_assets/chocolate-cake.jpg)

This is my favorite chocolate cake recipe!

## Ingredients

- 2 cups flour
- 1 cup sugar
- 1/2 cup cocoa powder
- ...

## Instructions

1. Preheat oven to 350¬∞F
2. Mix dry ingredients...
3. Bake for 30 minutes

![Finished cake](./\_assets/cake-finished.jpg)
```

If you're using images, put them in `_assets/`:
- `src/content/recipes/_assets/chocolate-cake.jpg`
- `src/content/recipes/_assets/cake-finished.jpg`

### 5. Restart and test

Stop your dev server (Ctrl+C) and start it again:

```bash
npm run dev
```

Or do sync + start in one go:

```bash
pnpm astro sync && npm run dev
```

Why restart? Astro needs to reload the config and generate new routes. It's just how it works.

Then check:
- `http://localhost:4321/collections/` ‚Äî your collection should be listed
- `http://localhost:4321/collections/recipes/` ‚Äî collection page
- `http://localhost:4321/collections/recipes/chocolate-cake/` ‚Äî your post

## What each property means

When you add a collection, here's what each field does:

- **`type`** ‚Äî Set to `'collection'` for regular collections
- **`title`** ‚Äî Display name (like "Recipes")
- **`description`** ‚Äî Short description for the collections page
- **`urlPattern`** ‚Äî URL structure (must include `{slug}`)
- **`listPage`** ‚Äî Where the collection list lives
- **`backLabel`** ‚Äî Text for the back button
- **`showInCollectionsList`** ‚Äî Show it on `/collections/` or not

Keep collection names lowercase with no spaces. Keep descriptions under 50 characters.

## Why this is better than before

**The old way** meant editing 5+ files every time you added a collection. Config file, routing files, type definitions‚Äîall manual.

**Now?** Edit one file (or run one command) and everything else happens automatically. Types get generated, routes get created, metadata gets loaded. No manual updates needed.

Want the absolute easiest way?

```bash
pnpm new:collection recipes
```

That's it.
- URL pattern must include `{slug}` placeholder

## Empty Collections

Collections can be empty (0 posts) and will still appear on the collections page with a count of 0. This is useful for:
- Planning future content
- Showing what's coming soon
- Maintaining consistent navigation

**Note:** You may see warnings like:
```
[WARN] [glob-loader] No files found matching "**/*.{md,mdx}" in directory "src\content\gallery"
```

This is **normal and not an error**. The collection will still work - just add your first post when ready!

## Removing a Collection

To remove a collection:

1. Delete the entry from `src/collections.config.ts`
2. Optionally delete the folder from `src/content/`
3. Run `pnpm astro sync`

## When to Sync & Restart

Understanding when you need to sync and restart saves time:

### ‚úÖ NO Sync/Restart Needed (Hot Reload Works)

These changes are detected automatically:
- Adding new posts to existing collections
- Editing content in `.md` or `.mdx` files
- Updating frontmatter (title, date, etc.)
- Adding images to `_assets/` folders
- Modifying component files

Just save the file and refresh your browser!

### ‚ùå Sync + Restart Required

These changes need `pnpm astro sync` and dev server restart:
- Adding a new collection to `collections.config.ts`
- Modifying collection properties in `collections.config.ts`
- Editing `content.config.ts`
- Editing `astro.config.ts`
- Installing new npm packages

**Quick command:**
```bash
pnpm astro sync && npm run dev
```

## Tips

- Use descriptive collection names (lowercase, no spaces)
- Keep collection descriptions short and clear
- Organize posts logically within each collection
- Use consistent naming conventions for post files
- Remember to sync + restart after adding collections
