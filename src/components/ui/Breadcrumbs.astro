---
export interface BreadcrumbItem {
  label: string
  href?: string
}

interface Props {
  items: BreadcrumbItem[]
}

const { items } = Astro.props
const { site } = Astro

// Generate JSON-LD structured data for SEO
const structuredData = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: items.map((item, index) => ({
    '@type': 'ListItem',
    position: index + 1,
    name: item.label,
    ...(item.href && { item: new URL(item.href, site).href })
  }))
}
---

<nav class="breadcrumbs" aria-label="Breadcrumb">
  <ol>
    {
      items.map((item) => (
        <li>
          {item.href ? (
            <a href={item.href}>{item.label}</a>
          ) : (
            <span class="current" aria-current="page">
              {item.label}
            </span>
          )}
        </li>
      ))
    }
  </ol>
</nav>

<!-- JSON-LD Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />

<style>
  .breadcrumbs {
    margin-bottom: 1.5rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-family: var(--sans);
  }

  ol {
    display: block;
    list-style: none;
    list-style-type: none;
    padding: 0;
    margin: 0;
    line-height: 1.5;
  }

  li {
    display: inline;
    list-style: none;
    list-style-type: none;
  }

  li::marker {
    display: none;
    content: '';
  }

  li::before {
    display: none;
    content: '';
  }

  li:not(:last-child)::after {
    content: ' / ';
    color: var(--text-tertiary);
    opacity: 0.5;
  }

  a,
  .current {
    display: inline;
    vertical-align: baseline;
  }

  a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.15s ease-out;
    opacity: 0.75;
  }

  a:hover {
    color: var(--text-primary);
    opacity: 1;
  }

  .separator {
    display: none;
  }

  .current {
    color: var(--text-primary);
    opacity: 1;
  }

  @media (max-width: 768px) {
    .breadcrumbs {
      font-size: 0.8125rem;
      margin-bottom: 1rem;
    }

    li:not(:last-child)::after {
      margin: 0 0.375rem;
    }
  }
</style>

